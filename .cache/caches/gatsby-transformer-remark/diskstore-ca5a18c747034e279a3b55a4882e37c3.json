{"expireTime":9007200823662582000,"key":"transformer-remark-markdown-ast-1917a54b2765e281f94a0ae5ffb26e01--","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"Like I mentioned in my previous blog,","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":38,"offset":38},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":38,"offset":38},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"An API (Application Programming Interface) is a way for one system to interact with another via a well-defined interface.","position":{"start":{"line":4,"column":3,"offset":42},"end":{"line":4,"column":124,"offset":163},"indent":[]}}],"position":{"start":{"line":4,"column":3,"offset":42},"end":{"line":4,"column":124,"offset":163},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":40},"end":{"line":4,"column":124,"offset":163},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"RubyOnRails is known for rapid development of web apps. Following the current trends, integrating a frontend framework has become challenging and even time consuming .","position":{"start":{"line":6,"column":1,"offset":165},"end":{"line":6,"column":168,"offset":332},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":165},"end":{"line":6,"column":168,"offset":332},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In fact, modern web app architecture nowadays consist of a client app that consumes a JSON API. Indeed, Rails 5 introduced the api mode ; A bootstrapped skeleton for api only apps.","position":{"start":{"line":8,"column":1,"offset":334},"end":{"line":8,"column":181,"offset":514},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":334},"end":{"line":8,"column":181,"offset":514},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We're going to quickly go through how to set up a Rails API app that does a lot of work for you so you won't need to spend as much time trying to configure all of the details.","position":{"start":{"line":10,"column":1,"offset":516},"end":{"line":10,"column":176,"offset":691},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":516},"end":{"line":10,"column":176,"offset":691},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Step 1: Create Rails API Skeleton","position":{"start":{"line":12,"column":3,"offset":695},"end":{"line":12,"column":36,"offset":728},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":693},"end":{"line":12,"column":38,"offset":730},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":693},"end":{"line":12,"column":38,"offset":730},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In your terminal type:","position":{"start":{"line":14,"column":1,"offset":732},"end":{"line":14,"column":23,"offset":754},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":732},"end":{"line":14,"column":23,"offset":754},"indent":[]}},{"type":"code","lang":null,"value":"rails new [api_name]  — api","position":{"start":{"line":16,"column":1,"offset":756},"end":{"line":18,"column":4,"offset":791},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If you want to set a specific database type or test suite, you can use the -d and -T flags. Otherwise your default with be a sqlite3 database and Minitest testing suite.","position":{"start":{"line":20,"column":1,"offset":793},"end":{"line":20,"column":170,"offset":962},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":793},"end":{"line":20,"column":170,"offset":962},"indent":[]}},{"type":"code","lang":null,"value":"rails new library --api -d mysql -T","position":{"start":{"line":22,"column":1,"offset":964},"end":{"line":24,"column":4,"offset":1007},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Step 2: Installing Rspec","position":{"start":{"line":26,"column":1,"offset":1009},"end":{"line":26,"column":25,"offset":1033},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1009},"end":{"line":26,"column":25,"offset":1033},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you decided you want to use RSpec instead of Minitest, you will need to install RSpec by adding it to your Gemfile on the development/test group:","position":{"start":{"line":28,"column":1,"offset":1035},"end":{"line":28,"column":149,"offset":1183},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1035},"end":{"line":28,"column":149,"offset":1183},"indent":[]}},{"type":"code","lang":null,"value":"group :development, :test do\n  gem 'rspec-rails', '~> 3.6'\nend","position":{"start":{"line":30,"column":1,"offset":1185},"end":{"line":34,"column":4,"offset":1255},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Once this has been added, run ","position":{"start":{"line":36,"column":1,"offset":1257},"end":{"line":36,"column":31,"offset":1287},"indent":[]}},{"type":"inlineCode","value":"bundle install","position":{"start":{"line":36,"column":31,"offset":1287},"end":{"line":36,"column":47,"offset":1303},"indent":[]}},{"type":"text","value":". When the bundle has finished, run ","position":{"start":{"line":36,"column":47,"offset":1303},"end":{"line":36,"column":83,"offset":1339},"indent":[]}},{"type":"inlineCode","value":"rails generate rspec:install","position":{"start":{"line":36,"column":83,"offset":1339},"end":{"line":36,"column":113,"offset":1369},"indent":[]}},{"type":"text","value":" to create all of the Rspec folders and files.","position":{"start":{"line":36,"column":113,"offset":1369},"end":{"line":36,"column":159,"offset":1415},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":1257},"end":{"line":36,"column":159,"offset":1415},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Step 3: Versioning","position":{"start":{"line":38,"column":1,"offset":1417},"end":{"line":38,"column":19,"offset":1435},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":1417},"end":{"line":38,"column":19,"offset":1435},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We want to access our api via /api/v1 url, so first let's create the missing folders:","position":{"start":{"line":40,"column":1,"offset":1437},"end":{"line":40,"column":86,"offset":1522},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":1437},"end":{"line":40,"column":86,"offset":1522},"indent":[]}},{"type":"code","lang":null,"value":"mkdir app/controllers/api\nmkdir app/controllers/api/v1","position":{"start":{"line":42,"column":1,"offset":1524},"end":{"line":45,"column":4,"offset":1586},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Step 4: Creating Models","position":{"start":{"line":47,"column":1,"offset":1588},"end":{"line":47,"column":24,"offset":1611},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1588},"end":{"line":47,"column":24,"offset":1611},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now that we have our initial API app set up, most things from here work like a normal Rails app.","position":{"start":{"line":49,"column":1,"offset":1613},"end":{"line":49,"column":97,"offset":1709},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":1613},"end":{"line":49,"column":97,"offset":1709},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Create a model using a generator:","position":{"start":{"line":51,"column":1,"offset":1711},"end":{"line":51,"column":34,"offset":1744},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":1711},"end":{"line":51,"column":34,"offset":1744},"indent":[]}},{"type":"code","lang":null,"value":"rails g scaffold Article title:string content:text slug:string\nrails db:migrate","position":{"start":{"line":53,"column":1,"offset":1746},"end":{"line":56,"column":4,"offset":1833},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Rails has now created the model, the migration and the spec for us. We have also gone ahead and migrated to create our articles table.","position":{"start":{"line":58,"column":1,"offset":1835},"end":{"line":58,"column":135,"offset":1969},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":1835},"end":{"line":58,"column":135,"offset":1969},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Step 5: Move resource controller to its respective folder","position":{"start":{"line":60,"column":1,"offset":1971},"end":{"line":60,"column":58,"offset":2028},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":1971},"end":{"line":60,"column":58,"offset":2028},"indent":[]}},{"type":"code","lang":null,"value":"mv app/controllers/articles_controller.rb app/controllers/api/v1","position":{"start":{"line":62,"column":1,"offset":2030},"end":{"line":64,"column":4,"offset":2102},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now we need to add the namespaces prior to the class name and update the url helper in the create methods which should en dup looking like this:","position":{"start":{"line":66,"column":1,"offset":2104},"end":{"line":66,"column":145,"offset":2248},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":2104},"end":{"line":66,"column":145,"offset":2248},"indent":[]}},{"type":"code","lang":null,"value":"class Api::V1::ArticlesController < ApplicationController\n\n  before_action :set_article, only: [:show, :update, :destroy]\n\n  # GET /articles\n  def index\n   @articles = Article.all\n   render json: @articles\n  end\n\n  # GET /articles/1\n  def show\n   render json: @article\n  end\n\n  # POST /articles\n  def create\n   @article = Article.new(article_params)\n   if @article.save\n    render json: @article, status: :created, location:        api_v1_article_url(@article)\n   else\n    render json: @article.errors, status: :unprocessable_entity\n   end\n  end\n\n  # PATCH/PUT /articles/1\n  def update\n   if @article.update(article_params)\n    render json: @article\n   else\n    render json: @article.errors, status: :unprocessable_entity\n   end\n  end\n\n # DELETE /articles/1\n  def destroy\n   @article.destroy\n  end\n\n  private\n\n  # Use callbacks to share common setup or constraints between actions.\n  def set_article\n   @article = Article.find(params[:id])\n  end\n\n  # Only allow a trusted parameter “white list” through.\n  def article_params\n  params.require(:article).permit(:title, :content, :slug)\n  end\n  end","position":{"start":{"line":68,"column":1,"offset":2250},"end":{"line":120,"column":4,"offset":3353},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Step 6: Update route file","position":{"start":{"line":122,"column":1,"offset":3355},"end":{"line":122,"column":26,"offset":3380},"indent":[]}}],"position":{"start":{"line":122,"column":1,"offset":3355},"end":{"line":122,"column":26,"offset":3380},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Open up the routes.rb file and delete the resource line:","position":{"start":{"line":124,"column":1,"offset":3382},"end":{"line":124,"column":57,"offset":3438},"indent":[]}}],"position":{"start":{"line":124,"column":1,"offset":3382},"end":{"line":124,"column":57,"offset":3438},"indent":[]}},{"type":"code","lang":null,"value":"resources :articles","position":{"start":{"line":126,"column":1,"offset":3440},"end":{"line":129,"column":4,"offset":3468},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Then add the namespaces, your final route should look like this:","position":{"start":{"line":131,"column":1,"offset":3470},"end":{"line":131,"column":65,"offset":3534},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":3470},"end":{"line":131,"column":65,"offset":3534},"indent":[]}},{"type":"code","lang":null,"value":"Rails.application.routes.draw do\n namespace :api do\n  namespace :v1 do\n   resources :articles\n  end\n end\n\nend","position":{"start":{"line":133,"column":1,"offset":3536},"end":{"line":142,"column":4,"offset":3653},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Step 7: Rinse and Repeat","position":{"start":{"line":144,"column":1,"offset":3655},"end":{"line":144,"column":25,"offset":3679},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":3655},"end":{"line":144,"column":25,"offset":3679},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can repeat steps 4-6 to create as many resources that you want!","position":{"start":{"line":146,"column":1,"offset":3681},"end":{"line":146,"column":68,"offset":3748},"indent":[]}}],"position":{"start":{"line":146,"column":1,"offset":3681},"end":{"line":146,"column":68,"offset":3748},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":147,"column":1,"offset":3749}}}}